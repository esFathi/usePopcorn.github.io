{"ast":null,"code":"import _regeneratorRuntime from\"F:/project/react/jounas/usepopcorn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/project/react/jounas/usepopcorn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"F:/project/react/jounas/usepopcorn/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"F:/project/react/jounas/usepopcorn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import NavBar from\"./NavBar\";import SearchBox from\"./SerachBox\";import ResultsNumber from\"./ResultsNumber\";import Box from\"./Ui/Box\";import Loader from\"./Ui/Loader\";import ErrorMessage from\"./Ui/ErrorMessage\";import ResultsList from\"./ResultsList\";import WatchedSummary from\"./WatchedSummary\";import UserMoviesList from\"./UserMoviesList\";import MovieDetails from\"./MovieDetails\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),movies=_useState4[0],setMovies=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),watched=_useState6[0],setWatched=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),movieIdSelected=_useState12[0],setMovieIdSelected=_useState12[1];// select movie for watch movie list\nvar selectMovieHandler=function selectMovieHandler(id){setMovieIdSelected(function(mid){return mid===id?null:id;});};// close movie details to back to watched movie list\nvar closeMovieHandler=function closeMovieHandler(){setMovieIdSelected(null);};// add movie to the watched lsit movie\nvar addWatchedHandler=function addWatchedHandler(movieWatched){setWatched(function(watched){return watched=[].concat(_toConsumableArray(watched),[movieWatched]);});// close movie details to back to watched movie list\ncloseMovieHandler();};// delete a watched movie from watched movie list\nvar removeWatchedHandler=function removeWatchedHandler(id){setWatched(watched.filter(function(movie){return movie.imdbID!==id;}));};useEffect(function(){var controller=new AbortController();// here we get data from api for movie list\nvar getMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;setIsLoading(true);setError(\"\");_context.next=5;return fetch(\"http://www.omdbapi.com/?apikey=a862ad48&s=\".concat(query),{signal:controller.signal});case 5:response=_context.sent;if(response.ok){_context.next=8;break;}throw new Error(\"Something went wrong with fetching movies\");case 8:_context.next=10;return response.json();case 10:data=_context.sent;if(!(data.Response===\"False\")){_context.next=13;break;}throw new Error(\"Movie not found!\");case 13:setMovies(data.Search);setError(\"\");_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);if(_context.t0.name!==\"AbortError\")setError(_context.t0.message);case 20:_context.prev=20;setIsLoading(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}},_callee,null,[[0,17,20,23]]);}));return function getMovies(){return _ref.apply(this,arguments);};}();if(query.length<3){setMovies([]);setError(\"\");return;}closeMovieHandler();getMovies();return function(){controller.abort();};},[query]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(NavBar,{children:[/*#__PURE__*/_jsx(SearchBox,{query:query,setQuery:setQuery}),/*#__PURE__*/_jsx(ResultsNumber,{movies:movies})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main\",children:[/*#__PURE__*/_jsxs(Box,{children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),!isLoading&&!error&&/*#__PURE__*/_jsx(ResultsList,{movies:movies,onSelectMovie:selectMovieHandler}),error&&/*#__PURE__*/_jsx(ErrorMessage,{errorMessage:error})]}),/*#__PURE__*/_jsx(Box,{children:movieIdSelected?/*#__PURE__*/_jsx(MovieDetails,{movieIdSelected:movieIdSelected,onCloseMovie:closeMovieHandler,onAddwatched:addWatchedHandler,watched:watched}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(WatchedSummary,{watched:watched}),/*#__PURE__*/_jsx(UserMoviesList,{watched:watched,onRemoveWatched:removeWatchedHandler})]})})]})]});}","map":{"version":3,"names":["useEffect","useState","NavBar","SearchBox","ResultsNumber","Box","Loader","ErrorMessage","ResultsList","WatchedSummary","UserMoviesList","MovieDetails","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","_useState","_useState2","_slicedToArray","query","setQuery","_useState3","_useState4","movies","setMovies","_useState5","_useState6","watched","setWatched","_useState7","_useState8","isLoading","setIsLoading","_useState9","_useState10","error","setError","_useState11","_useState12","movieIdSelected","setMovieIdSelected","selectMovieHandler","id","mid","closeMovieHandler","addWatchedHandler","movieWatched","concat","_toConsumableArray","removeWatchedHandler","filter","movie","imdbID","controller","AbortController","getMovies","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","signal","sent","ok","Error","json","Response","Search","t0","name","message","finish","stop","apply","arguments","length","abort","children","className","onSelectMovie","errorMessage","onCloseMovie","onAddwatched","onRemoveWatched"],"sources":["F:/project/react/jounas/usepopcorn/src/components/App.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport NavBar from \"./NavBar\";\nimport SearchBox from \"./SerachBox\";\nimport ResultsNumber from \"./ResultsNumber\";\nimport Box from \"./Ui/Box\";\nimport Loader from \"./Ui/Loader\";\nimport ErrorMessage from \"./Ui/ErrorMessage\";\nimport ResultsList from \"./ResultsList\";\nimport WatchedSummary from \"./WatchedSummary\";\nimport UserMoviesList from \"./UserMoviesList\";\nimport MovieDetails from \"./MovieDetails\";\n\nexport default function App() {\n  const [query, setQuery] = useState(\"\");\n  const [movies, setMovies] = useState([]);\n  const [watched, setWatched] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [movieIdSelected, setMovieIdSelected] =\n    useState(null);\n\n  // select movie for watch movie list\n  const selectMovieHandler = (id) => {\n    setMovieIdSelected((mid) => (mid === id ? null : id));\n  };\n\n  // close movie details to back to watched movie list\n  const closeMovieHandler = () => {\n    setMovieIdSelected(null);\n  };\n\n  // add movie to the watched lsit movie\n  const addWatchedHandler = (movieWatched) => {\n    setWatched(\n      (watched) => (watched = [...watched, movieWatched])\n    );\n\n    // close movie details to back to watched movie list\n    closeMovieHandler();\n  };\n\n  // delete a watched movie from watched movie list\n  const removeWatchedHandler = (id) => {\n    setWatched(\n      watched.filter((movie) => movie.imdbID !== id)\n    );\n  };\n\n  useEffect(() => {\n    const controller = new AbortController();\n    // here we get data from api for movie list\n    const getMovies = async () => {\n      try {\n        setIsLoading(true);\n        setError(\"\");\n        const response = await fetch(\n          `http://www.omdbapi.com/?apikey=a862ad48&s=${query}`,\n          { signal: controller.signal }\n        );\n\n        if (!response.ok)\n          throw new Error(\n            \"Something went wrong with fetching movies\"\n          );\n\n        const data = await response.json();\n\n        if (data.Response === \"False\")\n          throw new Error(\"Movie not found!\");\n\n        setMovies(data.Search);\n        setError(\"\");\n      } catch (error) {\n        if (error.name !== \"AbortError\")\n          setError(error.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    if (query.length < 3) {\n      setMovies([]);\n      setError(\"\");\n      return;\n    }\n\n    closeMovieHandler();\n    getMovies();\n\n    return () => {\n      controller.abort();\n    };\n  }, [query]);\n\n  return (\n    <>\n      <NavBar>\n        <SearchBox query={query} setQuery={setQuery} />\n        <ResultsNumber movies={movies} />\n      </NavBar>\n      <main className='main'>\n        <Box>\n          {isLoading && <Loader />}\n          {!isLoading && !error && (\n            <ResultsList\n              movies={movies}\n              onSelectMovie={selectMovieHandler}\n            />\n          )}\n          {error && <ErrorMessage errorMessage={error} />}\n        </Box>\n        <Box>\n          {movieIdSelected ? (\n            <MovieDetails\n              movieIdSelected={movieIdSelected}\n              onCloseMovie={closeMovieHandler}\n              onAddwatched={addWatchedHandler}\n              watched={watched}\n            />\n          ) : (\n            <>\n              <WatchedSummary watched={watched} />\n              <UserMoviesList\n                watched={watched}\n                onRemoveWatched={removeWatchedHandler}\n              />\n            </>\n          )}\n        </Box>\n      </main>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}